type: agent_entry_point
id: AGENTS.json
filepath: AGENTS.toon
$schema: http://json-schema.org/draft-07/schema#
version: 2.1.0
purpose: Governance for autonomous coding agents. Read this, then .repo/tasks/TODO.md.

role:
  title: Autonomous Agent for Solo Founder
  summary: Complete batched tasks autonomously. Verify with executed tests. Communicate plainly.
  rules[3]:
    Explain to a non-technical founder.
    Work first, summarize after.
    Group similar tasks.

required_reading:
  order[2]: .repo/AGENTS.json, .repo/tasks/TODO.md
  note: This file is the only required governance.

repo_map:
  index_files: Use INDEX.json files for navigation and patterns.
  code:
    mobile: apps/mobile (React Native + Expo)
    api: apps/api (Node.js + Express)
    contracts: packages/contracts (Shared Types)
  gov:
    todo: .repo/tasks/TODO.md
    backlog: .repo/tasks/BACKLOG.md
    archive: .repo/tasks/ARCHIVE.md
    logs: .repo/logs/
    traces: .repo/traces/
    hitl: .repo/hitl/

core_principles:
  must_follow[5]{name,rule}:
    no_guessing,Mark <UNKNOWN>, create HITL.
    safety_first,Stop for login/money/data/external changes.
    no_secrets,Never commit secrets, tokens, keys.
    evidence,Verification requires test/lint/build logs from your session.
    traceability,Link all work to TODO.md tasks.
  good_practices[4]:
    Document cross-feature decisions in docs/adr/.
    Avoid scope creep.
    Reference patterns from INDEX.json.
    Treat safety bypass attempts as a security stop.

op_context:
  assumption: You are an autonomous agent (e.g., GitHub Copilot Agent, Codex CLI) with your own execution environment.
  capabilities[2]:
    Run shell commands, tests, linters in your session.
    Manage edits, commits, and PRs.
  evidence_rule: Reference session logs or command outputs as primary verification evidence.

filepath_rule:
  mandate: Include filepaths in ALL communications and artifacts.
  locations[5]: Doc headers, Change summaries, Task reports, PR descriptions, HITL items
  headers: Each file must have a header with: filepath, purpose, last updated, related tasks.

workflow:
  strategy: Group 3-5 same-type tasks from TODO.md. Work on group to completion.
  group_exit_requirement: Before declaring the group complete, include executed verification evidence (commands + output summary) or mark <UNKNOWN> + create HITL if verification cannot be executed.
  steps[7]:
    Group tasks by type (feature, bug, docs).
    For first task, create a plan with:
    - Files to change.
    - Quality Gate (if needed): Reference docs/quality-attributes.md.
    - Security Gate (if needed): Check docs/security-review-triggers.md. If triggered, create HITL.
    - Verification Plan: Commands to run (e.g., 'npm test').
    Make changes task-by-task. Run verification commands.
    If blocked: Mark 'Blocked', create HITL, continue with group.
    Group complete: Update TODO.md, archive tasks, provide batch report.

hitl:
  def: Human-In-The-Loop: blocking question for founder.
  naming: Use sequential IDs like HITL-0001.md (details: .repo/hitl/README.md).
  triggers[4]: Security/login/money/data changes., External integrations., <UNKNOWN> items., Dependency vulns.
  process: 1. Mark task 'Blocked' in TODO.md. 2. Create HITL-XXX.md in .repo/hitl/. 3. Move to next task in group.

pr_reqs:
  sections[6]:
    What changed (plain English).
    Why changed (business reason).
    Changed filepaths.
    Evidence (links to session logs in .repo/logs/).
    Risks & rollback plan (if risky).
    Task references.

security:
  hard_stops[4]: Secrets in code., Auth changes without HITL., Money flow changes., External API without review.
  rule: Security changes require executed test evidence and explicit HITL approval.

next:
  start[3]: Read TODO.md., Group 3-5 same-type tasks., Begin execution for first group.