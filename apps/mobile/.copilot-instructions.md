# Client Directory Instructions

**Path:** `/client`
**Purpose:** React Native mobile application (iOS-first)
**Agent Role:** Primary (GitHub Copilot)

---

## Quick Reference

### Before making changes, read
- [BESTPR.md](../BESTPR.md) - Token-optimized best practices guide
- [Constitution](../docs/governance/constitution.md) - Core laws and governance
- [Client Laws](.github/instructions/client.instructions.md) - Frontend-specific rules

---

## Directory Structure

```text
client/
├── screens/          # 44 screens (PascalCaseScreen.tsx)
├── components/       # Reusable UI (ThemedView, Card, etc.)
├── hooks/            # Custom hooks (useTheme, useColorScheme)
├── context/          # React contexts (ThemeContext, NavigationContext)
├── lib/              # Core libraries (eventBus, moduleHandoff, etc.)
├── analytics/        # Comprehensive analytics system
├── storage/          # AsyncStorage + database layer
├── models/           # TypeScript types (100+ types)
├── constants/        # Theme tokens, colors, spacing
├── utils/            # Helper functions
└── navigation/       # AppNavigator, RootStackNavigator
```text

---

## Key Patterns

### 1. Always Use Themed Components
```tsx
// ✅ DO
import { ThemedView } from '@/components/ThemedView'
import { ThemedText } from '@/components/ThemedText'

<ThemedView><ThemedText>Content</ThemedText></ThemedView>

// ❌ DON'T
<View><Text>Content</Text></View>
```text

### 2. Use Theme Tokens (Never Hardcode Colors)
```typescript
import { Colors } from '@/constants/theme'

const styles = StyleSheet.create({
  container: {
    backgroundColor: Colors.dark.background,  // ✅ DO
    // backgroundColor: '#0A0E1A',            // ❌ DON'T
  }
})
```text

### 3. Primary Agent = iOS Only
```typescript
// ✅ DO: Build for iOS
export default function MyScreen() {
  return <ThemedView>...</ThemedView>
}

// ❌ DON'T: Add platform checks (create follow-up task instead)
if (Platform.OS === 'android') { /* NO */ }
```text

### 4. TypeScript Strict Mode
```typescript
// ✅ DO: Full type coverage
interface Props {
  userId: string
  onComplete: (result: Result) => void
}

// ❌ DON'T: Use 'any'
function bad(data: any) { /* NO */ }
```text

### 5. Test All New Features
```typescript
// Component tests required (80% coverage minimum)
import { render, screen } from '@testing-library/react-native'

describe('MyComponent', () => {
  it('renders correctly', () => {
    render(<MyComponent />)
    expect(screen.getByText('Title')).toBeTruthy()
  })
})
```text

---

## Common Files

| File | Purpose |
| ------ | --------- |
| `constants/theme.ts` | Color tokens, spacing, semantic tokens |
| `models/types.ts` | 100+ TypeScript type definitions |
| `lib/query-client.ts` | TanStack Query configuration |
| `lib/moduleHandoff.ts` | Module navigation tracking |
| `lib/eventBus.ts` | Event system |
| `App.tsx` | Root component |

---

## Critical Rules

1. **Evidence-Based:** Cite file paths and line numbers
2. **Safe Editing:** Never delete working code without justification
3. **Verification:** Include test/build/lint output in PRs
4. **Themed Components:** Always use ThemedView/ThemedText
5. **Type Safety:** Strict TypeScript, no 'any'
6. **Testing:** 80% coverage for new components
7. **No Platform Checks:** iOS-first, create follow-up for Android/Web

---

## Before Committing

- [ ] Read [BESTPR.md](../BESTPR.md)
- [ ] Use themed components
- [ ] Use theme tokens (no hardcoded colors)
- [ ] TypeScript strict mode passes
- [ ] Tests written and passing
- [ ] Lint passes
- [ ] No Platform.OS checks
- [ ] Documentation updated

---

### See [BESTPR.md](../BESTPR.md) for comprehensive best practices