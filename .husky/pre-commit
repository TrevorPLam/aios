# Run format check (fail if diff exists)
npm run check:format

# Run lint check
npm run lint

# Run type check
npm run check:types

# Run secret scanning (if gitleaks is available)
if command -v gitleaks >/dev/null 2>&1; then
  echo "ğŸ” Running Gitleaks secret scan..."
  gitleaks detect --source . --no-banner --verbose || exit 1
fi

# Hard block: Check changelog and logs (required for feature/api_change/security/non_doc_change)
echo "ğŸ” Checking CHANGELOG.md and logs..."
node .repo/automation/scripts/check-changelog-and-logs.js || exit 1
